<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Click to Grow Flowers</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: black;
  }

  canvas {
    display: block;
    cursor: pointer;
  }

  .hint {
    position: fixed;
    bottom: 15px;
    width: 100%;
    text-align: center;
    color: #888;
    font-family: Arial, sans-serif;
    font-size: 13px;
    letter-spacing: 1px;
  }
</style>
</head>
<body>

<canvas id="canvas"></canvas>
<div class="hint">Click anywhere above the floor ðŸŒ¸</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  drawFloor();
});

const floorY = () => canvas.height - 60;

function drawFloor() {
  ctx.strokeStyle = "#0a3";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(0, floorY());
  ctx.lineTo(canvas.width, floorY());
  ctx.stroke();
}

drawFloor();

function randomFlowerColor() {
  return `hsl(${Math.random() * 360}, 85%, 60%)`;
}

function drawFlower(x, y) {
  const petals = 8 + Math.floor(Math.random() * 6);
  const size = 10 + Math.random() * 10;
  const color = randomFlowerColor();

  for (let i = 0; i < petals; i++) {
    const angle = (Math.PI * 2 / petals) * i;

    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.ellipse(
      x + Math.cos(angle) * size,
      y + Math.sin(angle) * size,
      size,
      size / 2,
      angle,
      0,
      Math.PI * 2
    );
    ctx.fill();
  }

  ctx.fillStyle = "#f1c40f";
  ctx.beginPath();
  ctx.arc(x, y, 4, 0, Math.PI * 2);
  ctx.fill();
}

function growStem(x, targetHeight) {
  let current = 0;
  let lastX = x;
  let lastY = floorY();

  function animate() {
    if (current >= targetHeight) {
      drawFlower(lastX, lastY);
      return;
    }

    const sway = Math.sin(current / 8) * 4;
    const newX = x + sway;
    const newY = floorY() - current;

    ctx.strokeStyle = "#2ecc71";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(lastX, lastY);
    ctx.lineTo(newX, newY);
    ctx.stroke();

    lastX = newX;
    lastY = newY;

    current += 6; // ðŸ”¥ SPEED CONTROL (bigger = faster)
    requestAnimationFrame(animate);
  }

  animate();
}

canvas.addEventListener("click", (e) => {
  const x = e.clientX;

  // Height depends on click position
  const maxHeight = Math.max(40, floorY() - e.clientY);
  const randomHeight = maxHeight * (0.5 + Math.random() * 0.5);

  growStem(x, randomHeight);
});
</script>

</body>
</html>
